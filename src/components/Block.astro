---
import BadgesBlock from './blocks/BadgesBlock.astro'
import ContactBlock from './blocks/ContactBlock.astro'
import FeaturesBlock from './blocks/FeaturesBlock.astro'
import Show from './Show.astro'

interface Props {
  block: CMS.Block
}

const { block } = Astro.props as Props

function isBadgesBlock(block: CMS.Block): block is CMS.BadgesBlock {
  return block.template === 'badgesblock'
}

function isContactBlock(block: CMS.Block): block is CMS.ContactBlock {
  return block.template === 'contactblock'
}

function isFeaturesBlock(block: CMS.Block): block is CMS.FeaturesBlock {
  return block.template === 'featuresblock'
}

const Block = isBadgesBlock(block)
  ? BadgesBlock
  : isContactBlock(block)
  ? ContactBlock
  : isFeaturesBlock(block)
  ? FeaturesBlock
  : undefined

---

<Show when={!!Block}>
  <Block {...block} />
</Show>