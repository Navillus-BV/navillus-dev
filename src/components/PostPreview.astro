---
import { formatDate } from '../utils/formatDate';

export let post;

const tagsData = post.tags.map((tag) => {
    return {
        tag,
        url: `/tags/${tag}`
    }
})
---

<article>
    <a href={post.url}>
        <h3 class="underline">{post.title}</h3>
    </a>
    
    <time class="h6" datetime={post.published_date}>{formatDate(post.published_date)}</time>
    <small> â€¢ {post.minutes} min read</small>

    <p>{post.description}</p>

    {tagsData.map(({ tag, url }) => (
        <a href={url}><code>{tag}</code></a>
    ))}
</article>

<style lang="scss">
    article:not(:first-of-type) {
        margin-top: var(--spacer-lg)
    }

    h3, p {
        margin-bottom: var(--spacer-tiny);
    }

    small + p {
        margin-top: var(--spacer-sm);
    }

    a {
        color: inherit;
    }

    code {
        margin-top: var(--spacer-xs);
        display: inline-block;

        &:first-of-type {
            margin-left: 0;
        }
    }
</style>