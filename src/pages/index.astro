---
import PageLayout from '../layouts/Page.astro'
import { isPublished, hasPermalink } from '../utils/cms.ts'
import { organizationSchema, websiteSchema } from '../utils/jsonLD.ts'

const page = Astro.fetchContent('../data/pages/*.md')
  .filter(isPublished)
  .find(hasPermalink('/'))

const Layout = page.template === 'page' ? PageLayout : PageLayout
---

<Layout {...page}>
  {websiteSchema}
  {organizationSchema}
</Layout>